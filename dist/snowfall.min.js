var M=Object.defineProperty;var O=(e,t)=>{for(var n in t)M(e,n,{get:t[n],enumerable:!0})};var x={};O(x,{allocate_memory:()=>D,default:()=>h,free_memory:()=>z,initSync:()=>U,lexer:()=>F,main_init:()=>k,version:()=>B});var i,c=null;function d(){return(c===null||c.buffer.detached===!0||c.buffer.detached===void 0&&c.buffer!==i.memory.buffer)&&(c=new DataView(i.memory.buffer)),c}function _(e,t){return e=e>>>0,R(e,t)}var b=null;function g(){return(b===null||b.byteLength===0)&&(b=new Uint8Array(i.memory.buffer)),b}function p(e,t,n){if(n===void 0){let a=u.encode(e),l=t(a.length,1)>>>0;return g().subarray(l,l+a.length).set(a),w=a.length,l}let r=e.length,s=t(r,1)>>>0,f=g(),o=0;for(;o<r;o++){let a=e.charCodeAt(o);if(a>127)break;f[s+o]=a}if(o!==r){o!==0&&(e=e.slice(o)),s=n(s,r,r=o+e.length*3,1)>>>0;let a=g().subarray(s+o,s+r),l=u.encodeInto(e,a);o+=l.written,s=n(s,r,o,1)>>>0}return w=o,s}function I(e){let t=i.__wbindgen_externrefs.get(e);return i.__externref_table_dealloc(e),t}var y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});y.decode();var T=2146435072,m=0;function R(e,t){return m+=t,m>=T&&(y=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),y.decode(),m=t),y.decode(g().subarray(e,e+t))}var u=new TextEncoder;"encodeInto"in u||(u.encodeInto=function(e,t){let n=u.encode(e);return t.set(n),{read:e.length,written:n.length}});var w=0;function D(e){return i.allocate_memory(e)>>>0}function z(e,t){i.free_memory(e,t)}function F(e){let t=p(e,i.__wbindgen_malloc,i.__wbindgen_realloc),n=w,r=i.lexer(t,n);if(r[2])throw I(r[1]);return I(r[0])}function k(){i.main_init()}function B(){let e,t;try{let n=i.version();return e=n[0],t=n[1],_(n[0],n[1])}finally{i.__wbindgen_free(e,t,1)}}var j=new Set(["basic","cors","default"]);async function P(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.ok&&j.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function A(){let e={};return e.wbg={},e.wbg.__wbg_Error_52673b7de5a0ca89=function(t,n){return Error(_(t,n))},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,n){let r=String(n),s=p(r,i.__wbindgen_malloc,i.__wbindgen_realloc),f=w;d().setInt32(t+4,f,!0),d().setInt32(t+0,s,!0)},e.wbg.__wbg___wbindgen_throw_dd24417ed36fc46e=function(t,n){throw new Error(_(t,n))},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let r,s;try{r=t,s=n,console.error(_(t,n))}finally{i.__wbindgen_free(r,s,1)}},e.wbg.__wbg_new_1ba21ce319a06297=function(){return new Object},e.wbg.__wbg_new_25f239778d6112b9=function(){return new Array},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_set_3f1d0b984ed272ed=function(t,n,r){t[n]=r},e.wbg.__wbg_set_7df433eea03a5c14=function(t,n,r){t[n>>>0]=r},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){let r=n.stack,s=p(r,i.__wbindgen_malloc,i.__wbindgen_realloc),f=w;d().setInt32(t+4,f,!0),d().setInt32(t+0,s,!0)},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,n){return _(t,n)},e.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_cast_9ae0607507abb057=function(t){return t},e.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return t},e.wbg.__wbindgen_init_externref_table=function(){let t=i.__wbindgen_externrefs,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function E(e,t){return i=e.exports,S.__wbindgen_wasm_module=t,c=null,b=null,i.__wbindgen_start(),i}function U(e){if(i!==void 0)return i;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));let t=A();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));let n=new WebAssembly.Instance(e,t);return E(n,e)}async function S(e){if(i!==void 0)return i;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("snowfall_core_bg.wasm",import.meta.url));let t=A();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:r}=await P(await e,t);return E(n,r)}var h=S;var W="v0.0.2";var v=class{_isDebug=!1;_wasm=null;_isInitialized=!1;constructor(t=!1){this._isDebug=t}async init(t){if(!this._isInitialized)try{await h(t),this._wasm=x,this._isInitialized=!0,this._logInfo("SnowFall Wasm module initialized successfully.")}catch(n){throw console.error("Failed to initialize SnowFall Wasm module:",n),n}}ensureInitialized(){if(!this._wasm||!this._isInitialized)throw new Error("SnowFall has not been initialized. Please call init() first.");return this._wasm}version(){return W}version_wasm(){return this.ensureInitialized().version()}dev_lexer(t){return this.ensureInitialized().lexer(t)}_logInfo(t){this._isDebug&&console.log(`[SnowFall] ${t}`)}};export{v as SnowFall};
//# sourceMappingURL=snowfall.min.js.map
